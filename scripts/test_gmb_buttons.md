# ุฏููู ุงุฎุชุจุงุฑ ุฃุฒุฑุงุฑ Google My Business

## ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

ูุจู ุงูุจุฏุก ูู ุงูุงุฎุชุจุงุฑุ ุชุฃูุฏ ูู:
1. ุชุดุบูู ุงูุฎุงุฏู ุงููุญูู: `npm run dev`
2. ูุชุญ Developer Console ูู ุงููุชุตูุญ (F12)
3. ุงูุงูุชูุงู ุฅูู ุนูุงูุฉ ุงูุชุจููุจ Console

---

## 1. ุงุฎุชุจุงุฑ ุฒุฑ Connect Google My Business

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุตูุญุฉ Settings: `http://localhost:3000/en/settings`
2. ุงุจุญุซ ุนู ูุณู "Google My Business Connection"
3. ุงููุฑ ุนูู ุฒุฑ "ุฑุจุท GMB" ุฃู "Connect Google My Business"

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:
```
โ ุงูุฒุฑ ูุชุญูู ุฅูู ุญุงูุฉ loading (spinner)
โ ูุธูุฑ ูู Console:
   [GMB Connect] Starting connection process
   [GMB Connect] Auth URL received
   [GMB Connect] Redirecting to Google OAuth
โ ูุชู ุชูุฌููู ุฅูู ุตูุญุฉ Google OAuth
```

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:
- โ ุฅุฐุง ุธูุฑ ุฎุทุฃ "ุฑุงุจุท ุงูุชูููุถ ุบูุฑ ุตุงูุญ": ุชุญูู ูู `GOOGLE_CLIENT_ID` ูู `.env`
- โ ุฅุฐุง ุธูุฑ ุฎุทุฃ "ุชุนุฐุฑ ุฅูุดุงุก ุฑุงุจุท ุงูุชูููุถ": ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช

---

## 2. ุงุฎุชุจุงุฑ ุฒุฑ Sync Now

### ุงูุดุฑูุท ุงููุณุจูุฉ:
- ูุฌุจ ุฃู ูููู ูุฏูู ุญุณุงุจ GMB ูุชุตู ุจุงููุนู

### ุงูุฎุทูุงุช:
1. ุงูุชุญ Dashboard: `http://localhost:3000/en/dashboard`
2. ุงุจุญุซ ุนู ุจุทุงูุฉ "Last Sync" ุฃู ุงูุชูู ุฅูู Settings
3. ุงููุฑ ุนูู ุฒุฑ "Sync Now" ุฃู "ูุฒุงููุฉ"

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:
```
โ ุงูุฒุฑ ูุชุญูู ุฅูู "Syncing..." ูุน spinner
โ ูุธูุฑ ูู Console:
   [GMB Sync] Starting sync for account: [account-id]
   [GMB Sync] Response: { success: true, counts: {...} }
โ ูุธูุฑ toast notification:
   "ุชูุช ุงููุฒุงููุฉ ุจูุฌุงุญ"
   "ุชู ูุฒุงููุฉ X ูููุน ู Y ูุฑุงุฌุนุฉ"
โ ูุชู ุชุญุฏูุซ "Last Sync" time
โ ุงูุฒุฑ ูุนูุฏ ุฅูู "Sync Now"
```

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:
- โ ุฅุฐุง ุธูุฑ "ูุง ููุฌุฏ ุญุณุงุจ ูุดุท": ุชุญูู ูู ุฃู ุงูุญุณุงุจ ูุชุตู
- โ ุฅุฐุง ุธูุฑ "ูุดูุช ุงููุฒุงููุฉ": ุชุญูู ูู:
  - ุตูุงุญูุฉ access token
  - ุงุชุตุงู ุงูุฅูุชุฑูุช
  - Console logs ููุชูุงุตูู

### ุงุฎุชุจุงุฑ ูุชูุฏู:
```javascript
// ูู Consoleุ ุฑุงูุจ ุงูุญุฏุซ:
window.addEventListener('gmb-sync-complete', () => {
  console.log('โ Sync complete event fired!')
})
```

---

## 3. ุงุฎุชุจุงุฑ ุฒุฑ Disconnect

### ุงูุดุฑูุท ุงููุณุจูุฉ:
- ูุฌุจ ุฃู ูููู ูุฏูู ุญุณุงุจ GMB ูุชุตู

### ุงูุฎุทูุงุช:
1. ุงูุชุญ Settings: `http://localhost:3000/en/settings`
2. ุงููุฑ ุนูู ุฒุฑ "Disconnect" ุฃู "ูุทุน ุงูุงุชุตุงู"
3. ุงุฎุชุฑ ุฃุญุฏ ุงูุฎูุงุฑุงุช:
   - **Keep (ุงูุงุญุชูุงุธ)**: ุงูุฎูุงุฑ ุงูููุตู ุจู
   - **Export (ุงูุชุตุฏูุฑ)**: ุชูุฒูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ
   - **Delete (ุงูุญุฐู)**: ุญุฐู ูู ุงูุจูุงูุงุช
4. ุงููุฑ "ูุทุน ุงูุงุชุตุงู"

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ (Keep):
```
โ ูุธูุฑ Dialog ูุน ุงูุฎูุงุฑุงุช ุงูุซูุงุซุฉ
โ ูุธูุฑ ูู Console:
   [GMB Disconnect] Starting disconnect with option: keep
   [GMB Disconnect] Result: { success: true }
โ ูุธูุฑ toast:
   "ุชู ูุทุน ุงูุงุชุตุงู ุจูุฌุงุญ"
   "ุชู ุฅุฎูุงุก ุงููููุฉ ูุฃุฑุดูุฉ ุงูุจูุงูุงุช"
โ ุงูู Dialog ููุบูู
โ ุชุชุญุฏุซ ุงูุตูุญุฉ
โ ูุธูุฑ ุฒุฑ "Connect" ุจุฏูุงู ูู "Disconnect"
```

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ (Export):
```
โ ูู ูุง ุณุจู +
โ ูุธูุฑ ูู Console:
   [GMB Disconnect] Starting disconnect with option: export
โ ูุชู ุชูุฒูู ููู JSON:
   gmb-data-export-2025-11-07.json
โ ูุธูุฑ toast ุฅุถุงูู:
   "ุชู ุชุตุฏูุฑ ุงูุจูุงูุงุช"
   "ุชู ุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุจูุงูุงุชู"
```

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ (Delete):
```
โ ูู ูุง ุณุจู (ุจุฏูู ุงูุชุตุฏูุฑ) +
โ ูุชู ุญุฐู ุฌููุน ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ ูุธูุฑ toast:
   "ุชู ูุทุน ุงูุงุชุตุงู ุจูุฌุงุญ"
   "ุชู ุญุฐู ุฌููุน ุงูุจูุงูุงุช"
```

### ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:
- โ ุฅุฐุง ุธูุฑ "ูุง ููุฌุฏ ุญุณุงุจ ูุชุตู": ุชุญูู ูู ุฃู ุงูุญุณุงุจ ูุชุตู
- โ ุฅุฐุง ูุดู ุงูุชุตุฏูุฑ: ุณูุธูุฑ toast ูููุตู ูููู ุงููุทุน ุณููุฌุญ

---

## 4. ุงุฎุชุจุงุฑุงุช ุฅุถุงููุฉ

### ุงุฎุชุจุงุฑ ุญุงูุงุช ุงูุฃุฎุทุงุก:

#### 1. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจุฏูู ุฅูุชุฑูุช:
```
1. ุงูุตู ุงูุฅูุชุฑูุช
2. ุงููุฑ ุนูู "Sync Now"
3. ุงููุชูุฌุฉ ุงููุชููุนุฉ:
   โ ูุธูุฑ toast ุฎุทุฃ
   โ ุงูุฒุฑ ูุนูุฏ ุฅูู ุญุงูุชู ุงูุทุจูุนูุฉ
```

#### 2. ุงุฎุชุจุงุฑ ุงูููุฑ ุงููุชูุฑุฑ ุงูุณุฑูุน:
```
1. ุงููุฑ ุนูู "Sync Now" ุนุฏุฉ ูุฑุงุช ุจุณุฑุนุฉ
2. ุงููุชูุฌุฉ ุงููุชููุนุฉ:
   โ ุงูุฒุฑ ูุตุจุญ disabled ุจุนุฏ ุฃูู ููุฑุฉ
   โ ูุง ูุชู ุฅุฑุณุงู ุทูุจุงุช ูุชุนุฏุฏุฉ
```

#### 3. ุงุฎุชุจุงุฑ token ููุชูู ุงูุตูุงุญูุฉ:
```
1. ุงูุชุธุฑ ุญุชู ููุชูู access token (ุณุงุนุฉ ูุงุญุฏุฉ)
2. ุงููุฑ ุนูู "Sync Now"
3. ุงููุชูุฌุฉ ุงููุชููุนุฉ:
   โ ูุฌุจ ุฃู ูุชู refresh token ุชููุงุฆูุงู
   ุฃู
   โ ูุธูุฑ ุฎุทุฃ "ูุฑุฌู ุฅุนุงุฏุฉ ุงูุงุชุตุงู"
```

---

## 5. Console Logs ุงููููุฏุฉ

ุฃุซูุงุก ุงูุงุฎุชุจุงุฑุ ุฑุงูุจ ูุฐู ุงูู logs:

### Connect:
```
[GMB Connect] Starting connection process
[GMB Connect] Auth URL received
[GMB Connect] Redirecting to Google OAuth
[OAuth Callback] Processing OAuth callback...
[OAuth Callback] User ID from state: [user-id]
[OAuth Callback] Tokens received successfully
```

### Sync:
```
[GMB Sync] Starting sync for account: [account-id]
[GMB Sync API] Sync request received
[GMB Sync API] User authenticated: [user-id]
[GMB Sync API] Starting incremental sync for account: [account-id]
[GMB Sync] Response: { success: true, counts: { locations: X, reviews: Y } }
```

### Disconnect:
```
[GMB Disconnect] Starting disconnect with option: [option]
[GMB Disconnect API] Request received
[GMB Disconnect API] User authenticated: [user-id]
[GMB Disconnect API] Disconnecting account: [account-id]
[GMB Disconnect] Result: { success: true }
```

---

## 6. Checklist ุงูููุงุฆู

ูุจู ุงูุฅุนูุงู ุนู ูุฌุงุญ ุงูุฅุตูุงุญุ ุชุฃูุฏ ูู:

### ุฒุฑ Connect:
- [ ] ูุนูู ูู ุตูุญุฉ Settings
- [ ] ูุนูู ูู ุตูุญุฉ Dashboard (ุฅุฐุง ูุงู ููุฌูุฏุงู)
- [ ] ูุธูุฑ loading state
- [ ] ููุฌู ุฅูู Google OAuth
- [ ] ูุนูุฏ ุจุนุฏ OAuth ุจูุฌุงุญ
- [ ] ูุธูุฑ toast ูู ุญุงูุฉ ุงูุฎุทุฃ

### ุฒุฑ Sync Now:
- [ ] ูุนูู ูู Dashboard
- [ ] ูุนูู ูู Settings
- [ ] ูุธูุฑ loading state (spinner)
- [ ] ูุญุฏุซ last sync time
- [ ] ูุธูุฑ toast ุจุนุฏุฏ ุงูููุงูุน ูุงููุฑุงุฌุนุงุช
- [ ] ูุฑุณู ุญุฏุซ gmb-sync-complete
- [ ] ูุนุงูุฌ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ

### ุฒุฑ Disconnect:
- [ ] ููุชุญ Dialog ูุน ุงูุฎูุงุฑุงุช ุงูุซูุงุซุฉ
- [ ] ุฎูุงุฑ Keep ูุนูู
- [ ] ุฎูุงุฑ Export ูุนูู ููููุฒูู ุงูููู
- [ ] ุฎูุงุฑ Delete ูุนูู ููุญุฐู ุงูุจูุงูุงุช
- [ ] ูุธูุฑ toast ููุงุณุจ ููู ุฎูุงุฑ
- [ ] ููุญุฏูุซ ุงูุตูุญุฉ ุจุนุฏ ุงููุฌุงุญ
- [ ] ูุนุงูุฌ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ

---

## 7. ุงูุฅุจูุงุบ ุนู ุงููุดุงูู

ุฅุฐุง ูุฌุฏุช ุฃู ูุดููุฉุ ูุฏู ุงูุชุงูู:

1. **ุงูุฎุทูุงุช ุงููุชุจุนุฉ**: ุงุดุฑุญ ุจุงูุชูุตูู
2. **ุงููุชูุฌุฉ ุงููุนููุฉ**: ูุงุฐุง ุญุฏุซุ
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ูุงุฐุง ูุงู ูุฌุจ ุฃู ูุญุฏุซุ
4. **Console Logs**: ุงูุณุฎ ุงูู logs ูู Console
5. **Screenshots**: ุฅู ุฃููู

ูุซุงู:
```
### ุงููุดููุฉ: ุฒุฑ Sync ูุง ูุนูู

**ุงูุฎุทูุงุช:**
1. ูุชุญุช Dashboard
2. ููุฑุช ุนูู "Sync Now"

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
- ูุง ุดูุก ูุญุฏุซ
- ูุง ูุธูุฑ loading state

**Console Logs:**
[GMB Sync] Starting sync for account: abc123
Error: Network request failed

**Screenshot:** [ูุฑูู]
```

---

## ููุงุญุธุงุช ูููุฉ

1. **Environment Variables**: ุชุฃูุฏ ูู ูุฌูุฏ ุฌููุน ุงููุชุบูุฑุงุช ุงููุทููุจุฉ ูู `.env.local`:
   ```
   GOOGLE_CLIENT_ID=...
   GOOGLE_CLIENT_SECRET=...
   GOOGLE_REDIRECT_URI=...
   ```

2. **Database**: ุชุฃูุฏ ูู ุฃู ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฌูุฏุฉ:
   - `gmb_accounts`
   - `gmb_locations`
   - `gmb_reviews`
   - `gmb_questions`
   - `gmb_posts`

3. **Supabase**: ุชุฃูุฏ ูู ุฃู RLS policies ุชุณูุญ ุจุงูุนูููุงุช ุงููุทููุจุฉ

4. **Network**: ุชุฃูุฏ ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ

---

## ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

ุจุนุฏ ุฅููุงู ุฌููุน ุงูุงุฎุชุจุงุฑุงุชุ ุงููุฃ ุงูุฌุฏูู ุงูุชุงูู:

| ุงูุฒุฑ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|------|--------|-----------|
| Connect | โฌ Pass / โฌ Fail |  |
| Sync Now | โฌ Pass / โฌ Fail |  |
| Disconnect (Keep) | โฌ Pass / โฌ Fail |  |
| Disconnect (Export) | โฌ Pass / โฌ Fail |  |
| Disconnect (Delete) | โฌ Pass / โฌ Fail |  |
| Error Handling | โฌ Pass / โฌ Fail |  |

---

## ุงูุฎูุงุตุฉ

ุฅุฐุง ูุฌุญุช ุฌููุน ุงูุงุฎุชุจุงุฑุงุชุ ูุฅู ุงูุฅุตูุงุญุงุช ูุงุฌุญุฉ! ๐

ููููู ุงูุขู:
- Deploy ุงูุชุบููุฑุงุช ุฅูู production
- ุฅุบูุงู ุงูุชุฐูุฑุฉ ุงููุชุนููุฉ ุจุงููุดููุฉ
- ุชูุซูู ุงูุฅุตูุงุญุงุช ูู CHANGELOG

