# ๐๏ธ ูููู ูุงุนุฏุฉ ุจูุงูุงุช Supabase - NNH AI Studio

## ๐ ููุฎุต ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ

### โ ุงูุฌุฏุงูู ุงููุดุทุฉ (ุชุญุชูู ุนูู ุจูุงูุงุช)

| ุงูุฌุฏูู | ุนุฏุฏ ุงูุณุฌูุงุช | ุงููุตู |
|--------|-------------|-------|
| `gmb_accounts` | 6 | ุญุณุงุจุงุช Google My Business |
| `gmb_locations` | 2 | ุงูููุงูุน ุงูุชุฌุงุฑูุฉ |
| `gmb_reviews` | 468 | ุงูุชููููุงุช ูุงููุฑุงุฌุนุงุช |
| `gmb_questions` | 19 | ุงูุฃุณุฆูุฉ ูุงูุฃุฌูุจุฉ |
| `gmb_media` | 579 | ุงูุตูุฑ ูุงูููุฏูููุงุช |
| `oauth_tokens` | 2 | ุชูููุงุช OAuth ูููุตุงุฏูุฉ |
| `oauth_states` | 28 | ุญุงูุงุช OAuth ููุฃูุงู |
| `profiles` | 11 | ูููุงุช ุงููุณุชุฎุฏููู |
| `youtube_videos` | 1 | ููุฏูููุงุช YouTube |

### โ๏ธ ุงูุฌุฏุงูู ุงููุงุฑุบุฉ (ููุฌูุฏุฉ ูููู ุจุฏูู ุจูุงูุงุช)

- `gmb_posts` - ููุดูุฑุงุช Google My Business
- `gmb_insights` - ุฅุญุตุงุฆูุงุช ูุชุญูููุงุช GMB
- `gmb_attributes` - ุฎุตุงุฆุต ุงูููุงูุน ุงูุชุฌุงุฑูุฉ
- `youtube_drafts` - ูุณูุฏุงุช ููุฏูููุงุช YouTube
- `notifications` - ุงูุฅุดุนุงุฑุงุช

### โ ุงูุฌุฏุงูู ุบูุฑ ุงูููุฌูุฏุฉ

- `youtube_channels` - ูููุงุช YouTube
- `ai_generation_history` - ุณุฌู ุชูููุฏ ุงููุญุชูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- `user_preferences` - ุชูุถููุงุช ุงููุณุชุฎุฏููู

---

## ๐ ุชูุงุตูู ุงูุฃุนูุฏุฉ ููู ุฌุฏูู

### 1๏ธโฃ `gmb_accounts` (ุญุณุงุจุงุช Google My Business)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `account_name` | String | ุงุณู ุงูุญุณุงุจ |
| `email` | String | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| `google_account_id` | String | ูุนุฑู ุญุณุงุจ Google |
| `access_token` | String | ุชููู ุงููุตูู |
| `refresh_token` | String | ุชููู ุงูุชุญุฏูุซ |
| `token_expires_at` | Timestamp | ุชุงุฑูุฎ ุงูุชูุงุก ุงูุชููู |
| `last_sync` | Timestamp | ุขุฎุฑ ูุฒุงููุฉ |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `is_active` | Boolean | ูุดุท ุฃู ูุง |
| `updated_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |
| `account_id` | String (null) | ูุนุฑู ุงูุญุณุงุจ ุงูุฅุถุงูู |
| `settings` | JSONB | ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 14  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 6

---

### 2๏ธโฃ `gmb_locations` (ุงูููุงูุน ุงูุชุฌุงุฑูุฉ)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `gmb_account_id` | UUID | ูุนุฑู ุญุณุงุจ GMB |
| `location_name` | String | ุงุณู ุงููููุน |
| `location_id` | String | ูุนุฑู ุงููููุน ูู Google |
| `address` | String | ุงูุนููุงู |
| `phone` | String | ุฑูู ุงููุงุชู |
| `category` | String | ุงููุฆุฉ |
| `website` | String | ุงููููุน ุงูุฅููุชุฑููู |
| `is_active` | Boolean | ูุดุท ุฃู ูุง |
| `metadata` | JSONB | ุจูุงูุงุช ุฅุถุงููุฉ |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |
| `business_hours` | JSONB | ุณุงุนุงุช ุงูุนูู |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `rating` | Number (null) | ุงูุชูููู |
| `normalized_location_id` | String | ูุนุฑู ุงููููุน ุงููุนูุงุฑู |
| `latitude` | Number (null) | ุฎุท ุงูุนุฑุถ |
| `longitude` | Number (null) | ุฎุท ุงูุทูู |
| `type` | String | ููุน ุงููููุน |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 19  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 2

---

### 3๏ธโฃ `gmb_reviews` (ุงูุชููููุงุช ูุงููุฑุงุฌุนุงุช)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `location_id` | UUID | ูุนุฑู ุงููููุน |
| `external_review_id` | String | ูุนุฑู ุงููุฑุงุฌุนุฉ ูู Google |
| `reviewer_name` | String | ุงุณู ุงููุฑุงุฌุน |
| `rating` | Number | ุงูุชูููู (1-5) |
| `review_text` | String (null) | ูุต ุงููุฑุงุฌุนุฉ |
| `review_date` | Timestamp | ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ |
| `reply_text` | String | ูุต ุงูุฑุฏ |
| `reply_date` | Timestamp | ุชุงุฑูุฎ ุงูุฑุฏ |
| `has_reply` | Boolean | ุชู ุงูุฑุฏ ุฃู ูุง |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `ai_sentiment` | String (null) | ุงููุดุงุนุฑ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู |
| `gmb_account_id` | UUID | ูุนุฑู ุญุณุงุจ GMB |
| `ai_generated_response` | String (null) | ุงูุฑุฏ ุงููููุฏ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู |
| `review_id` | String (null) | ูุนุฑู ุงููุฑุงุฌุนุฉ |
| `comment` | String (null) | ุชุนููู |
| `review_reply` | String (null) | ุฑุฏ ุนูู ุงููุฑุงุฌุนุฉ |
| `replied_at` | Timestamp (null) | ุชุงุฑูุฎ ุงูุฑุฏ |
| `ai_suggested_reply` | String (null) | ุงูุฑุฏ ุงูููุชุฑุญ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู |
| `status` | String | ุงูุญุงูุฉ |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 22  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 468

---

### 4๏ธโฃ `gmb_questions` (ุงูุฃุณุฆูุฉ ูุงูุฃุฌูุจุฉ)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `gmb_account_id` | UUID | ูุนุฑู ุญุณุงุจ GMB |
| `location_id` | UUID | ูุนุฑู ุงููููุน |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `external_question_id` | String | ูุนุฑู ุงูุณุคุงู ูู Google |
| `question_text` | String | ูุต ุงูุณุคุงู |
| `author_name` | String | ุงุณู ุงูุณุงุฆู |
| `author_type` | String | ููุน ุงูุณุงุฆู |
| `answer_text` | String | ูุต ุงูุฅุฌุงุจุฉ |
| `answered_by` | String (null) | ูู ุฃุฌุงุจ |
| `answered_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅุฌุงุจุฉ |
| `answer_status` | String | ุญุงูุฉ ุงูุฅุฌุงุจุฉ |
| `ai_suggested_answer` | String (null) | ุงูุฅุฌุงุจุฉ ุงูููุชุฑุญุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู |
| `ai_confidence_score` | Number (null) | ุฏุฑุฌุฉ ุซูุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู |
| `upvote_count` | Number | ุนุฏุฏ ุงูุชุตููุชุงุช ุงูุฅูุฌุงุจูุฉ |
| `is_featured` | Boolean | ูููุฒ ุฃู ูุง |
| `is_hidden` | Boolean | ูุฎูู ุฃู ูุง |
| `language_code` | String | ุฑูุฒ ุงููุบุฉ |
| `metadata` | JSONB | ุจูุงูุงุช ุฅุถุงููุฉ |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |
| `synced_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ูุฒุงููุฉ |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 22  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 19

---

### 5๏ธโฃ `gmb_media` (ุงูุตูุฑ ูุงูููุฏูููุงุช)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `gmb_account_id` | UUID | ูุนุฑู ุญุณุงุจ GMB |
| `location_id` | UUID | ูุนุฑู ุงููููุน |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `external_media_id` | String | ูุนุฑู ุงูููุฏูุง ูู Google |
| `type` | String | ููุน ุงูููุฏูุง (ุตูุฑุฉ/ููุฏูู) |
| `url` | String | ุฑุงุจุท ุงูููุฏูุง |
| `thumbnail_url` | String | ุฑุงุจุท ุงูุตูุฑุฉ ุงููุตุบุฑุฉ |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | Timestamp (null) | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |
| `metadata` | JSONB | ุจูุงูุงุช ุฅุถุงููุฉ |
| `synced_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ูุฒุงููุฉ |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 12  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 579

---

### 6๏ธโฃ `oauth_tokens` (ุชูููุงุช ุงููุตุงุฏูุฉ)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `access_token` | String | ุชููู ุงููุตูู |
| `refresh_token` | String | ุชููู ุงูุชุญุฏูุซ |
| `expires_at` | Timestamp (null) | ุชุงุฑูุฎ ุงูุงูุชูุงุก |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `provider` | String | ูุฒูุฏ ุงูุฎุฏูุฉ (google/youtube) |
| `account_id` | String | ูุนุฑู ุงูุญุณุงุจ |
| `metadata` | JSONB | ุจูุงูุงุช ุฅุถุงููุฉ |
| `token_expires_at` | Timestamp | ุชุงุฑูุฎ ุงูุชูุงุก ุงูุชููู |
| `updated_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 11  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 2

---

### 7๏ธโฃ `oauth_states` (ุญุงูุงุช OAuth ููุฃูุงู)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `state` | String | ุฑูุฒ ุงูุญุงูุฉ |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `expires_at` | Timestamp | ุชุงุฑูุฎ ุงูุงูุชูุงุก |
| `used` | Boolean | ูุณุชุฎุฏู ุฃู ูุง |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 6  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 28

---

### 8๏ธโฃ `profiles` (ูููุงุช ุงููุณุชุฎุฏููู)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `email` | String | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| `full_name` | String | ุงูุงุณู ุงููุงูู |
| `avatar_url` | String | ุฑุงุจุท ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |
| `user_id` | UUID (null) | ูุนุฑู ุงููุณุชุฎุฏู |
| `provider_sub` | String (null) | ูุนุฑู ุงููุฒูุฏ |
| `last_login` | Timestamp (null) | ุขุฎุฑ ุชุณุฌูู ุฏุฎูู |
| `phone` | String (null) | ุฑูู ุงููุงุชู |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 10  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 11

---

### 9๏ธโฃ `youtube_videos` (ููุฏูููุงุช YouTube)

| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `id` | UUID | ุงููุนุฑู ุงููุฑูุฏ |
| `user_id` | UUID | ูุนุฑู ุงููุณุชุฎุฏู |
| `video_id` | String | ูุนุฑู ุงูููุฏูู ูู YouTube |
| `title` | String | ุงูุนููุงู |
| `description` | String | ุงููุตู |
| `tags` | Array | ุงููุณูู |
| `category` | String | ุงููุฆุฉ |
| `language` | String | ุงููุบุฉ |
| `privacy_status` | String | ุญุงูุฉ ุงูุฎุตูุตูุฉ |
| `thumbnail_url` | String | ุฑุงุจุท ุงูุตูุฑุฉ ุงููุตุบุฑุฉ |
| `published_at` | Timestamp | ุชุงุฑูุฎ ุงููุดุฑ |
| `created_at` | Timestamp | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | Timestamp | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |

**ุนุฏุฏ ุงูุฃุนูุฏุฉ:** 13  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 1

---

### ๐ `youtube_drafts` (ูุณูุฏุงุช YouTube)

**ุญุงูุฉ:** ุฌุฏูู ูุงุฑุบ  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 0

---

### 1๏ธโฃ1๏ธโฃ `gmb_posts` (ููุดูุฑุงุช GMB)

**ุญุงูุฉ:** ุฌุฏูู ูุงุฑุบ  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 0

---

### 1๏ธโฃ2๏ธโฃ `gmb_insights` (ุฅุญุตุงุฆูุงุช GMB)

**ุญุงูุฉ:** ุฌุฏูู ูุงุฑุบ  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 0

---

### 1๏ธโฃ3๏ธโฃ `gmb_attributes` (ุฎุตุงุฆุต ุงูููุงูุน)

**ุญุงูุฉ:** ุฌุฏูู ูุงุฑุบ  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 0

---

### 1๏ธโฃ4๏ธโฃ `notifications` (ุงูุฅุดุนุงุฑุงุช)

**ุญุงูุฉ:** ุฌุฏูู ูุงุฑุบ  
**ุนุฏุฏ ุงูุณุฌูุงุช:** 0

---

## ๐ ุฅุญุตุงุฆูุงุช ุนุงูุฉ

- **ุฅุฌูุงูู ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ:** 14 ุฌุฏูู
- **ุงูุฌุฏุงูู ุงููุดุทุฉ (ุจูุง ุจูุงูุงุช):** 9 ุฌุฏุงูู
- **ุงูุฌุฏุงูู ุงููุงุฑุบุฉ:** 5 ุฌุฏุงูู
- **ุงูุฌุฏุงูู ุงูููููุฏุฉ:** 3 ุฌุฏุงูู
- **ุฅุฌูุงูู ุงูุณุฌูุงุช:** 1,116 ุณุฌู

### ๐ ุชูุฒูุน ุงูุจูุงูุงุช

| ุงูุฌุฏูู | ุงููุณุจุฉ ุงููุฆููุฉ |
|--------|----------------|
| gmb_media | 51.9% (579) |
| gmb_reviews | 41.9% (468) |
| oauth_states | 2.5% (28) |
| gmb_questions | 1.7% (19) |
| profiles | 1.0% (11) |
| gmb_accounts | 0.5% (6) |
| gmb_locations | 0.2% (2) |
| oauth_tokens | 0.2% (2) |
| youtube_videos | 0.1% (1) |

---

## ๐ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู

```
profiles (ุงููุณุชุฎุฏููู)
  โโโ gmb_accounts (ุญุณุงุจุงุช GMB)
        โโโ gmb_locations (ุงูููุงูุน)
              โโโ gmb_reviews (ุงูุชููููุงุช)
              โโโ gmb_questions (ุงูุฃุณุฆูุฉ)
              โโโ gmb_media (ุงูุตูุฑ)
              โโโ gmb_posts (ุงูููุดูุฑุงุช)
              โโโ gmb_insights (ุงูุฅุญุตุงุฆูุงุช)
              โโโ gmb_attributes (ุงูุฎุตุงุฆุต)

profiles (ุงููุณุชุฎุฏููู)
  โโโ oauth_tokens (ุชูููุงุช ุงููุตุงุฏูุฉ)
  โโโ oauth_states (ุญุงูุงุช OAuth)
  โโโ youtube_videos (ููุฏูููุงุช YouTube)
```

---

## ๐ Row Level Security (RLS)

ุฌููุน ุงูุฌุฏุงูู ูุญููุฉ ุจุณูุงุณุงุช RLS ุงูุชู ุชูุฑุถ:
- ูู ูุณุชุฎุฏู ููููู ุงููุตูู ููุท ุฅูู ุจูุงูุงุชู ุงูุฎุงุตุฉ
- ุงูููุชุฑุฉ ุงูุชููุงุฆูุฉ ุจูุงุกู ุนูู `user_id`
- ุงูุญูุงูุฉ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฌุฏุงูู ุงูููููุฏุฉ:** ูุฌุจ ุฅูุดุงุก ูุฐู ุงูุฌุฏุงูู ุฅุฐุง ูุงูุช ูุทููุจุฉ:
   - `youtube_channels`
   - `ai_generation_history`
   - `user_preferences`

2. **ุงูุฌุฏุงูู ุงููุงุฑุบุฉ:** ูุฏ ุชุญุชุงุฌ ุฅูู ุชุนุจุฆุชูุง ุฃู ุญุฐููุง ุฅุฐุง ูู ุชูู ูุณุชุฎุฏูุฉ

3. **ุชุญุณููุงุช ููุชุฑุญุฉ:**
   - ุฅุถุงูุฉ indexes ุนูู ุงูุฃุนูุฏุฉ ูุซูุฑุฉ ุงูุงุณุชุฎุฏุงู
   - ูุฑุงุฌุนุฉ ุงูุฃุนูุฏุฉ null ููุชุฃูุฏ ูู ุงูุญุงุฌุฉ ุฅูููุง
   - ุชูุญูุฏ ุชุณููุงุช ุงูุฃุนูุฏุฉ (ูุซู `token_expires_at` vs `expires_at`)

---

**ุขุฎุฑ ุชุญุฏูุซ:** 4 ููููุจุฑ 2025  
**ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ:** NNH AI Studio Database Inspector
